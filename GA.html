<!--
This file is part of PolyGA, made by Luca Mari, 2018-2019.

PolyGA is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 2.

PolyGA is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License <http://www.gnu.org/licenses/> for more details.
-->
<html>
<head>
<script>
var rem = "PolyGA, made by Luca Mari, 2018-2019.";
rem += "\n\nIt is free software: you can redistribute it and/or modify it";
rem += "\nunder the terms of the GNU General Public License";
rem += "\nas published by the Free Software Foundation, version 2.";
rem += "\n\nSee a short how-to-use at https://github.com/lmari/GA";
</script>
<meta charset="UTF-8">
<title>PolyGA</title>
<link rel="stylesheet" href="res/jquery-ui.min.css">
<script src="res/jquery.min.js"></script>
<script src="res/jquery-ui.min.js"></script>
<script src="res/Chart.bundle.min.js"></script>
<script src="res/utils.js"></script>
<script src="res/widgets.js"></script>
<script src="res/txt_it.js"></script>
<script>
//defaults
var numPts = defNumPts = 3;
var numSrs = defNumSrs = 5;
var numDel = defNumDel = 1;
var combin = defCombin = 10;
var change = defChange = 10;
var chang2 = defChang2 = 10;
var numNew = defNumNew = 1;

var sNumPts, sNumSrs, sNumDel, sCombin, sChange, sChang2, sNumNew;
var bManExec, bAutoExec, bReset;

$(document).ready(function() {
  setText('xSetup', 'setup');
  setText('xNumPts', 'tNumPts');
  sNumPts = new _Slider('xxNumPts', '', txt.toolNumPts, 2, 20, 1, defNumPts);
  setText('xNumSrs', 'tNumSrs');
  sNumSrs = new _Slider('xxNumSrs', '', txt.toolNumSrs, 1, 50, 1, defNumSrs);
  setText('xSelection', 'selection');
  setText('xNumDel', 'tNumDel');
  sNumDel = new _Slider('xxNumDel', '', txt.toolNumDel, 0, numSrs, 1, defNumDel);
  setText('xGeneration', 'generation');
  setText('xCombin', 'tCombin');
  sCombin = new _Slider('xxCombin', '', txt.toolCombin, 0, 50, 10, defCombin);
  setText('xChange', 'tChange');
  sChange = new _Slider('xxChange', '', txt.toolChange, 0, 100, 10, defChange);
  setText('xChang2', 'tChang2');
  sChang2 = new _Slider('xxChang2', '', txt.toolChang2, 0, 100, 10, defChang2);
  setText('xNumNew', 'tNumNew');
  sNumNew = new _Slider('xxNumNew', '', txt.toolNumNew, 0, numSrs, 1, defNumNew);

  sNumSrs.onChange(function() {
    let nSrs = sNumSrs.getValue();
    sNumDel.setMax(nSrs);
    sNumNew.setMax(nSrs);
  });
  sNumDel.onChange(() => numDel = sNumDel.getValue());
  sCombin.onChange(() => combin = sCombin.getValue());
  sChange.onChange(() => change = sChange.getValue());
  sChang2.onChange(() => chang2 = sChang2.getValue());
  sNumNew.onChange(() => numNew = sNumNew.getValue());


  bManExec = new _Button('g0', '1. Select', 'prova');
  bManExec.setActions(selectFit, '1. Select', removeUnfit, '2. Remove', updateSrs, '3. Update');

  bReset = new _Button('h0', 'Reset target', 'prova');
  bReset.setAction(() => resetTarget(true));

  bAutoExec = new _Button('i0', 'Start', 'prova');
  bAutoExec.setActions(startProcess, 'Start', stopProcess, 'Stop');
});
</script>
</head>
<body>
<h1>PolyGA: an example of Genetic Algorithm
<a href="javascript:window.alert(rem);">[?]</a>
</h1>
<table>
  <tr><td><b id='xSetup'></b></td>
    <td id='xNumPts'></td><td id='xxNumPts'></td></tr>
  <tr><td></td><td id='xNumSrs'></td><td id='xxNumSrs'></td></tr>
  <tr><td><b id='xSelection'></b></td>
    <td id='xNumDel'></td><td id='xxNumDel'></td></tr>
  <tr><td><b id='xGeneration'></b></td>
    <td id='xCombin'></td><td id='xxCombin'></td></tr>
  <tr><td></td><td id='xChange'></td><td id='xxChange'></td></tr>
  <tr><td></td><td id='xChang2'></td><td id='xxChang2'></td></tr>
  <tr><td><b id='t3'>Immigrazione</b></td>
    <td id='xNumNew'></td><td id='xxNumNew'></td></tr>
</table>

<div id='g0'></div>
<div id='h0'></div>
<div id='i0'></div>

<p><button id="bSet">Set all</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<input type="checkbox" id="cShowData">Show params

<div style="position:relative; left:10px; width:600px;">
  <canvas id="myCanvas" style="border:2px solid #FF9933;"></canvas>
</div>
<div id="myText" style="position:relative; left:20px;">...</div>

<script>
var showData;
$('#cShowData').prop('checked', showData = true);

$('#bSet').click(function () {
  numPts = sNumPts.getValue();
  numSrs = sNumSrs.getValue();
  setAll();
});

$('#cShowData').click(function () {
  showData = $('#cShowData').prop('checked');
  writeData("#myText", false, true);
});

var ctx = $("#myCanvas");

setAll();
</script>
</body>
</html>
